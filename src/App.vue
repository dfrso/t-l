<template>
  <!-- Background Wrap -->
  <div class="tgme_background_wrap">
    <canvas id="tgme_background" class="tgme_background default" width="50" height="50" data-colors="0a0a0a,121212,0e0e0e,101010"></canvas>
    <div class="tgme_background_pattern default"></div>
  </div>

  <!-- Main Page Wrap -->
  <div class="tgme_page_wrap">
    <!-- Header -->
    <div class="tgme_head_wrap">
      <div class="tgme_head">
        <a href="https://telegram.org/" class="tgme_head_brand">
          <svg class="tgme_logo" height="34" viewBox="0 0 133 34" width="133" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" fill-rule="evenodd">
              <circle cx="17" cy="17" fill="var(--accent-btn-color)" r="17"/>
              <path d="m7.06510669 16.9258959c5.22739451-2.1065178 8.71314291-3.4952633 10.45724521-4.1662364 4.9797665-1.9157646 6.0145193-2.2485535 6.6889567-2.2595423.1483363-.0024169.480005.0315855.6948461.192827.1814076.1361492.23132.3200675.2552048.4491519.0238847.1290844.0536269.4231419.0299841.65291-.2698553 2.6225356-1.4375148 8.986738-2.0315537 11.9240228-.2513602 1.2428753-.7499132 1.5088847-1.2290685 1.5496672-1.0413153.0886298-1.8284257-.4857912-2.8369905-1.0972863-1.5782048-.9568691-2.5327083-1.3984317-4.0646293-2.3321592-1.7703998-1.0790837-.212559-1.583655.7963867-2.5529189.2640459-.2536609 4.7753906-4.3097041 4.755976-4.431706-.0070494-.0442984-.1409018-.481649-.2457499-.5678447-.104848-.0861957-.2595946-.0567202-.3712641-.033278-.1582881.0332286-2.6794907 1.5745492-7.5636077 4.6239616-.715635.4545193-1.3638349.6759763-1.9445998.6643712-.64024672-.0127938-1.87182452-.334829-2.78737602-.6100966-1.12296117-.3376271-1.53748501-.4966332-1.45976769-1.0700283.04048-.2986597.32581586-.610598.8560076-.935815z" fill="#fff"/>
              <path d="m49.4 24v-12.562h-4.224v-2.266h11.198v2.266h-4.268v12.562zm16.094-4.598h-7.172c.066 1.936 1.562 2.772 3.3 2.772 1.254 0 2.134-.198 2.97-.484l.396 1.848c-.924.396-2.2.682-3.74.682-3.476 0-5.522-2.134-5.522-5.412 0-2.97 1.804-5.764 5.236-5.764 3.476 0 4.62 2.86 4.62 5.214 0 .506-.044.902-.088 1.144zm-7.172-1.892h4.708c.022-.99-.418-2.618-2.222-2.618-1.672 0-2.376 1.518-2.486 2.618zm9.538 6.49v-15.62h2.706v15.62zm14.84-4.598h-7.172c.066 1.936 1.562 2.772 3.3 2.772 1.254 0 2.134-.198 2.97-.484l.396 1.848c-.924.396-2.2.682-3.74.682-3.476 0-5.522-2.134-5.522-5.412 0-2.97 1.804-5.764 5.236-5.764 3.476 0 4.62 2.86 4.62 5.214 0 .506-.044.902-.088 1.144zm-7.172-1.892h4.708c.022-.99-.418-2.618-2.222-2.618-1.672 0-2.376 1.518-2.486 2.618zm19.24-1.144v6.072c0 2.244-.462 3.85-1.584 4.862-1.1.99-2.662 1.298-4.136 1.298-1.364 0-2.816-.308-3.74-.858l.594-2.046c.682.396 1.826.814 3.124.814 1.76 0 3.08-.924 3.08-3.234v-.924h-.044c-.616.946-1.694 1.584-3.124 1.584-2.662 0-4.554-2.2-4.554-5.236 0-3.52 2.288-5.654 4.862-5.654 1.65 0 2.596.792 3.102 1.672h.044l.11-1.43h2.354c-.044.726-.088 1.606-.088 3.08zm-2.706 2.948v-1.738c0-.264-.022-.506-.088-.726-.286-.99-1.056-1.738-2.2-1.738-1.518 0-2.64 1.32-2.64 3.498 0 1.826.924 3.3 2.618 3.3 1.012 0 1.892-.66 2.2-1.65.088-.264.11-.638.11-.946zm5.622 4.686v-7.26c0-1.452-.022-2.508-.088-3.454h2.332l.11 2.024h.066c.528-1.496 1.782-2.266 2.948-2.266.264 0 .418.022.638.066v2.53c-.242-.044-.484-.066-.814-.066-1.276 0-2.178.814-2.42 2.046-.044.242-.066.528-.066.814v5.566zm16.05-6.424v3.85c0 .968.044 1.914.176 2.574h-2.442l-.198-1.188h-.066c-.638.836-1.76 1.43-3.168 1.43-2.156 0-3.366-1.562-3.366-3.19 0-2.684 2.398-4.07 6.358-4.048v-.176c0-.704-.286-1.87-2.178-1.87-1.056 0-2.156.33-2.882.792l-.528-1.76c.792-.484 2.178-.946 3.872-.946 3.432 0 4.422 2.178 4.422 4.532zm-2.64 2.662v-1.474c-1.914-.022-3.74.374-3.74 2.002 0 1.056.682 1.54 1.54 1.54 1.1 0 1.87-.704 2.134-1.474.066-.198.066-.396.066-.594zm5.6 3.762v-7.524c0-1.232-.044-2.266-.088-3.19h2.31l.132 1.584h.066c.506-.836 1.474-1.826 3.3-1.826 1.408 0 2.508.792 2.97 1.98h.044c.374-.594.814-1.034 1.298-1.342.616-.418 1.298-.638 2.2-.638 1.76 0 3.564 1.21 3.564 4.642v6.314h-2.64v-5.918c0-1.782-.616-2.838-1.914-2.838-.924 0-1.606.66-1.892 1.43-.088.242-.132.594-.132.902v6.424h-2.64v-6.204c0-1.496-.594-2.552-1.848-2.552-1.012 0-1.694.792-1.958 1.518-.088.286-.132.594-.132.902v6.336z" fill="var(--tme-logo-color)" fill-rule="nonzero"/>
            </g>
          </svg>
        </a>
        <a class="tgme_head_right_btn" href="https://telegram.org/dl">
          Download
        </a>
      </div>
    </div>

    <!-- Body Wrap -->
    <div class="tgme_body_wrap">
      <div class="tgme_page">
        <!-- Channel Avatar -->
        <div class="channel-avatar">
          <a href="#">
            <img v-if="channelAvatar" class="tgme_page_photo_image" :src="channelAvatar" :alt="channelName">
            <svg v-else width="122" height="122" viewBox="0 0 122 122" class="tgme_page_photo_image">
              <defs>
                <linearGradient id="avatarGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:#ff885e;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#ff516a;stop-opacity:1" />
                </linearGradient>
              </defs>
              <circle cx="61" cy="61" r="61" fill="url(#avatarGradient)"/>
              <text x="61" y="61" text-anchor="middle" dy=".35em" fill="white" font-size="52" font-weight="600">
                {{ channelInitial }}
              </text>
            </svg>
          </a>
        </div>

        <!-- Channel Info -->
        <div class="channel-info">
          <h1 class="channel-name">{{ channelName }}</h1>
          <p class="members-info">{{ memberCount }}</p>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn-join shine" @click="handleJoin">
            Join Group
          </button>
          
          <button class="btn-open" @click="handleOpenWeb">
            <span class="btn-label">Open in Web</span>
          </button>
        </div>

        <!-- Additional Info -->
        <div class="tgme_page_additional">
          You are invited to the group <strong>{{ channelName }}</strong>. Click above to join.
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { ref, computed, onMounted } from 'vue'

export default {
  name: 'App',
  setup() {
    const channelName = ref('Testing')
    const memberCount = ref('1 subscriber')
    const channelAvatar = ref('https://i.pravatar.cc/256?img=12') // Placeholder image - ganti dengan path gambar Anda

    const channelInitial = computed(() => {
      return channelName.value.charAt(0).toUpperCase()
    })

    const handleJoin = () => {
      alert('Joining group...')
      // window.open('https://t.me/yourchannel', '_blank')
    }

    const handleOpenWeb = () => {
      alert('Opening in Telegram Web...')
      // window.open('https://web.telegram.org', '_blank')
    }

    onMounted(() => {
      // Initialize Telegram wallpaper background
      const tme_bg = document.getElementById('tgme_background')
      if (tme_bg && typeof TWallpaper !== 'undefined') {
        TWallpaper.init(tme_bg)
        TWallpaper.animate(true)
        window.onfocus = function() { TWallpaper.update() }
      }
      // Remove transition class after load
      setTimeout(() => {
        document.body.classList.remove('no_transition')
      }, 100)
    })

    return {
      channelName,
      memberCount,
      channelAvatar,
      channelInitial,
      handleJoin,
      handleOpenWeb
    }
  }
}
</script>

<style scoped>
/* Page Wrap */
.tgme_page_wrap {
  font-family: 'Roboto', sans-serif;
  color: var(--text-color);
}

/* Header */
.tgme_head_wrap {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  height: 54px;
  padding: 10px 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  background: var(--box-bg-blured);
  backdrop-filter: blur(25px);
  z-index: 1;
}

.tgme_head {
  display: flex;
  justify-content: space-between;
}

.tgme_head_brand {
  display: inline-block;
  vertical-align: top;
}

.tgme_logo {
  display: inline-block;
  vertical-align: top;
}

a.tgme_head_right_btn {
  display: inline-block;
  font-size: 14px;
  line-height: 17px;
  font-weight: bold;
  text-transform: uppercase;
  color: #fff;
  background: var(--accent-btn-color);
  padding: 9px 16px;
  height: 34px;
  border-radius: 17px;
  text-align: center;
  transition: all .15s ease .15s;
  text-decoration: none;
}

a.tgme_head_right_btn:hover,
a.tgme_head_right_btn:active {
  text-decoration: none;
  color: #fff;
  background: #1a8ad5;
}

/* Body Wrap */
.tgme_body_wrap {
  padding: 70px 16px 40px;
}

.tgme_page {
  position: relative;
  margin: 16px auto;
  padding: 32px 0;
  max-width: 400px;
  background: var(--box-bg);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  border-radius: 16px;
  transition: all .15s ease .15s;
}

/* Channel Photo */
.channel-avatar {
  text-align: center;
  padding-bottom: 16px;
}

.channel-avatar a {
  display: inline-block;
  text-decoration: none;
  border-radius: 50%;
  overflow: hidden;
  transition: transform 0.3s ease;
}

.channel-avatar a:hover {
  transform: scale(1.03);
}

.tgme_page_photo_image {
  display: block;
  width: 122px;
  height: 122px;
  border-radius: 61px;
  object-fit: cover;
}

/* Channel Info */
.channel-info {
  text-align: center;
  margin-bottom: 24px;
}

.channel-name {
  font-size: 26px;
  line-height: 32px;
  font-weight: bold;
  text-align: center;
  max-width: 340px;
  padding: 0 10px;
  margin: 0 auto;
  color: var(--text-color);
  overflow: hidden;
  text-overflow: ellipsis;
}

.members-info {
  font-size: 15px;
  line-height: 18px;
  text-align: center;
  padding: 6px 16px 0;
  color: #7d7f81;
}

/* Action Buttons */
.action-buttons {
  text-align: center;
  margin-top: 24px;
  padding: 0 16px;
}

.btn-join,
.btn-open {
  font-size: 14px;
  line-height: 17px;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  border-radius: 22px;
  overflow: hidden;
  display: block;
  padding: 13px 28px;
  height: 42px;
  text-transform: uppercase;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  margin: 0 auto;
  width: fit-content;
  min-width: 200px;
  max-width: 100%;
}

.btn-join {
  color: #FFF;
  background: var(--accent-btn-color);
  background-image: linear-gradient(270deg, rgba(100, 181, 239, 0) 48.44%, #64b5ef 75.52%, rgba(100, 181, 239, 0) 100%);
  background-repeat: no-repeat;
  animation: bg-move linear 5s infinite;
}

.btn-join:hover,
.btn-join:active {
  color: #FFF;
  background-color: #1a8ad5;
  text-decoration: none;
}

@keyframes bg-move {
  0%   { background-position: -500px 0; }
  100% { background-position: 1000px 0; }
}

.btn-open {
  color: var(--accent-btn-color);
  background: transparent;
  box-shadow: inset 0 0 0 2px var(--accent-btn-color);
  margin-top: 18px;
}

.btn-open:hover,
.btn-open:active {
  color: var(--accent-btn-color);
  background: transparent;
  text-decoration: none;
}

.btn-label {
  position: relative;
  z-index: 1;
}

/* Additional Info */
.tgme_page_additional {
  font-size: 14px;
  line-height: 23px;
  text-align: center;
  padding: 0 16px;
  margin: 24px 0 0;
  color: #808080;
}

.tgme_page_additional strong {
  -webkit-font-smoothing: antialiased;
  color: #fff;
  font-weight: 500;
}

/* Responsive */
@media (max-width: 480px) {
  .tgme_page {
    margin-top: 0;
  }

  .tgme_page_photo_image {
    width: 110px;
    height: 110px;
    border-radius: 55px;
  }

  .channel-name {
    font-size: 24px;
  }

  .members-info {
    font-size: 14px;
  }

  .action-buttons {
    padding: 0 20px;
  }

  .btn-join,
  .btn-open {
    width: fit-content;
    max-width: calc(100% - 40px);
    min-width: 170px;
    padding: 13px 24px;
  }

  .tgme_page_additional {
    font-size: 13px;
  }
}
</style>

<style>
/* Global Telegram Styles (Not Scoped) */
.tgme_background_wrap {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
  background: #0a0a0a;
}

.tgme_background {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  /* Canvas will render animated background colors here */
  opacity: 0.1;
}

.tgme_background.default {
  opacity: 0.1;
}

.tgme_background_pattern {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-image: url('/pattern.svg');
  background-repeat: repeat;
  background-size: 450px auto;
  background-position: center;
  opacity: 0.35;
  filter: invert(1) sepia(1) saturate(3) hue-rotate(50deg) brightness(0.8);
  mix-blend-mode: lighten;
}

.tgme_background_pattern.default {
  opacity: 0.35;
}
</style>

